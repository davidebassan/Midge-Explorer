<html>
    <head>
        <title>Midge Explorer</title>
        <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
        <script src="https://static.robotwebtools.org/roslibjs/current/roslib.min.js" type="text/javascript"></script>
        <script src="https://cdn.jsdelivr.net/npm/eventemitter2@5.0.1/lib/eventemitter2.min.js"></script>
        <script type="text/javascript" src="https://static.robotwebtools.org/mjpegcanvasjs/current/mjpegcanvas.min.js"></script>
        <script type="text/javascript" src="https://static.robotwebtools.org/EaselJS/0.7.1/easeljs.min.js"></script>
        <script type="text/javascript" src="https://static.robotwebtools.org/ros2djs/current/ros2d.min.js"></script>
        <script type="text/javascript" src="http://static.robotwebtools.org/nav2djs/current/nav2d.min.js"></script>
        <script type="text/javascript" src="https://static.robotwebtools.org/ros3djs/current/ros3d.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link href="css/joystick.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">

        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>

    <body>
    <div id="app">
    <nav class="navbar navbar-light bg-light">
        <a class="navbar-brand" href="#">Midge Explorer</a>
            <button v-if="connected & autonomous" @click="autonomous_function" class="btn btn-warning">Autonomous Drive</button>
            <button v-if="connected & !autonomous" @click="autonomous_function" class="btn btn-warning">Joystick Drive</button>
        <span class='relevance-text'>Status:
            <span v-if="connected">
                </svg>
                <button @click="disconnect" class="btn btn-danger">Disconnect</button>
            </span>
            <span v-if="!connected" >
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-circle-fill" viewBox="0 0 16 16">
                  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
                </svg>
            </span>
        </span>
    </nav>

        <div class="container">
            <br v-if="!connected"/>
            <br v-if="!connected"/>
            <br v-if="!connected"/>
            <br v-if="!connected"/>

            <div class="connect" v-if="!connected">
                <div class="input-group mb-3">
                  <input type="text" v-model="address" class="form-control" placeholder="x.x.x.x:xxxx" aria-describedby="basic-addon2">
                  <div class="input-group-append">
                    <button @click="connect" class="input-group-text" id="basic-addon2">Connect</button>
                  </div>
                </div>
            </div>
        </div>

        <div v-if="connected" class="no-gutters p-0">

            <div class="col-md-12">
                <pre class="pre-scrollable">
                <code v-for="log in logs">
                {{ log }}
                </code>
                </pre>
            </div>
            <!--
            <div class="row">
                <div class="p-3 mb-2 bg-warning text-dark" id="movement_assistant">Movement Assistant: </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <table class="table table-dark">
                        <thead>
                            <tr>
                                <th>\</th>
                                <th>Prova</th>
                                <th>Prova2</th>
                                <th>Prova3</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th>Sensor1</th>
                                <td>Rilevation1</td>
                                <td>Rilevation2</td>
                                <td>Rilevation3</td>
                            </tr>
                            <tr>
                                <th>Sensor2</th>
                                <td>Rilevation1</td>
                                <td>Rilevation2</td>
                                <td>Rilevation3</td>
                            </tr>
                            <tr>
                                <th>Sensor3</th>
                                <td>Rilevation1</td>
                                <td>Rilevation2</td>
                                <td>Rilevation3</td>
                            </tr>
                        </tbody>



                    </table>
                </div>
            </div>

            -->
            <!--
            <div class="row">
                    <div class="col-md-12">
                        <div class="camera-bundle">
                            <h5 class="text-center">Camera</h5>
                            <div class="camera" id='live_camera'>
                            </div>
                        </div>
                        <div class="navigator" id="navigator">
                        </div>
                    </div>
                    <div class="col-md-6 sensor">
                        <h5 class="text-center">Sensori</h5>
                    </div>
                </div>

            -->
        </div>

        <div class="container">
            <div class="row" >
                <div class="col-md-6" id="live_camera">
                </div>
                <div class="col-md-6" id="navigator">
            </div>

            </div>
        </div>
    </div>
        <!--


            !-- Connection --
            <div class="jumbotron">

            </div>


            !-- Camera View, Sensors Value and Mapping --

            !-- Remote Control ---
            <br/>



    -->
    </body>
        <script type="text/javascript">
        function connect(){
            let movement_assistant_subscriber = new ROSLIB.Topic({
                            ros: app.ros,
                            name: '/movement_assistant',
                    messageType: 'std_msgs/String'
            });

            movement_assistant_subscriber.subscribe(function(message) {
                console.log('CE STO')
                write_on = getElementById('movement_assistant')
                write_on.innerHTML(message)
            });
        }
        </script>
    <script type="text/javascript" src="js/main.js"></script>

</html>
